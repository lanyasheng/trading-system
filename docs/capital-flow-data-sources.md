# èµ„é‡‘æµæ•°æ®æºè¯´æ˜

## å®æ—¶ç›‘æ§åœºæ™¯

### ä¼˜å…ˆçº§æ’åº

| ä¼˜å…ˆçº§ | æ•°æ®æº | æ•°æ®ç±»å‹ | å®æ—¶æ€§ | æ¨èåº¦ |
|--------|--------|---------|--------|--------|
| **P0** | ä¸œæ–¹è´¢å¯Œ | ä¸»åŠ›å‡€æµå…¥ (è¶…å¤§å•/å¤§å•/ä¸­å•/å°å•) | âœ… å®æ—¶ | ğŸ”¥ æœ€ä¼˜ |
| **P1** | è…¾è®¯è´¢ç» | å†…å¤–ç›˜æˆäº¤é‡ | âœ… å®æ—¶ | ğŸ”¥ æ¨è |
| **P2** | åŒèŠ±é¡º | åˆ†é’Ÿçº§æˆäº¤é¢ | âœ… å®æ—¶ | ğŸ”¥ æ¨è |
| **P3** | AKShare | ä¸»åŠ›å‡€æµå…¥ | âŒ T+1 | âŒ ä¸æ¨è |

### é™çº§é“¾è·¯

```
ä¸œæ–¹è´¢å¯Œ (å®æ—¶ä¸»åŠ›) â†’ âŒ å¶å°”å¤±è´¥ (Server disconnected)
    â†“
è…¾è®¯ (å®æ—¶å†…å¤–ç›˜)   â†’ âœ… æ­£å¸¸å·¥ä½œ (å·²ä¿®å¤)
    â†“
åŒèŠ±é¡º (å®æ—¶æˆäº¤é¢) â†’ âœ… æ­£å¸¸å·¥ä½œ
```

### ä¸ºä»€ä¹ˆ AKShare ä¸é€‚åˆå®æ—¶ç›‘æ§ï¼Ÿ

**AKShare æ•°æ®ç‰¹ç‚¹**ï¼š
- æ•°æ®æ¥æºï¼šä¸œæ–¹è´¢å¯Œå†å²æ¥å£
- æ•°æ®å»¶è¿Ÿï¼š**T+1 æ—¥** (ä»Šæ—¥è·å–æ˜¨æ—¥æ•°æ®)
- é€‚ç”¨åœºæ™¯ï¼šç›˜åå¤ç›˜ã€å†å²å›æµ‹
- ä¸é€‚ç”¨ï¼šç›˜ä¸­å®æ—¶ç›‘æ§

**ç¤ºä¾‹**ï¼š
```
2026-02-27 13:00 æŸ¥è¯¢ â†’ è¿”å› 2026-02-26 æ•°æ® âŒ
2026-02-27 ç›˜åæŸ¥è¯¢ â†’ è¿”å› 2026-02-27 æ•°æ® âœ…
```

### è…¾è®¯å†…å¤–ç›˜æ•°æ®è¯´æ˜

**å­—æ®µè¯´æ˜**ï¼š
- `outer_vol`: å¤–ç›˜æˆäº¤é‡ (ä¸»åŠ¨ä¹°å…¥ï¼Œæ‰‹)
- `inner_vol`: å†…ç›˜æˆäº¤é‡ (ä¸»åŠ¨å–å‡ºï¼Œæ‰‹)
- `outer_inner_diff`: å†…å¤–ç›˜å·® = å¤–ç›˜ - å†…ç›˜

**åˆ¤æ–­é€»è¾‘**ï¼š
```python
if outer_inner_diff > 100000:  # >10 ä¸‡æ‰‹
    signal = "å¤–ç›˜å¼ºåŠ¿ +8 åˆ†"
elif outer_inner_diff > 50000:  # >5 ä¸‡æ‰‹
    signal = "å¤–ç›˜åå¼º +5 åˆ†"
elif outer_inner_diff < -100000:
    signal = "å†…ç›˜å¼ºåŠ¿ -8 åˆ†"
elif outer_inner_diff < -50000:
    signal = "å†…ç›˜åå¼º -5 åˆ†"
else:
    signal = "å†…å¤–ç›˜å¹³è¡¡"
```

**é‡æ¯”ä¿®æ­£**ï¼š
- é‡æ¯” >3.0: å¯ä¿¡åº¦ +30%
- é‡æ¯” >1.5: å¯ä¿¡åº¦ +10%
- é‡æ¯” <0.8: å¯ä¿¡åº¦ -30%

### ä»£ç ä½ç½®

| æ¨¡å— | æ–‡ä»¶ | è¯´æ˜ |
|------|------|------|
| æ•°æ®æºç®¡ç† | `mcp-server/data_sources/capital_flow_manager.py` | æ‰¹é‡è°ƒç”¨ |
| è…¾è®¯è§£æ | `mcp-server/data_sources/tencent.py` | è§£æ outer_vol/inner_vol |
| èµ„é‡‘è¯„åˆ† | `mcp-server/analysis/capital_flow.py` | è¯„åˆ†é€»è¾‘ |
| æ•°æ®ç»“æ„ | `mcp-server/data_sources/base.py` | QuoteData å®šä¹‰ |

---

*æœ€åæ›´æ–°ï¼š2026-02-27 | äº¤æ˜“èœ˜è››*
